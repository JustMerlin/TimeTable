(()=>{"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var a=/\S/;function s(e){return!function(e,t){return i.call(e,t)}(a,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var l=/\s*/,u=/\s+/,h=/\s*=/,p=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function w(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,r,i,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,c,l,u=this,h=!1;u;){if(e.indexOf(".")>0)for(s=u.view,c=e.split("."),l=0;null!=s&&l<c.length;)l===c.length-1&&(h=o(s,c[l])||(r=s,i=c[l],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(i))),s=s[c[l++]];else s=u.view[e],h=o(u.view,e);if(h){t=s;break}u=u.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},w.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},w.prototype.parse=function(e,n){var o=this.templateCache,i=e+":"+(n||v.tags).join(":"),a=void 0!==o,c=a?o.get(i):void 0;return null==c&&(c=function(e,n){if(!e)return[];var o,i,a,c=!1,g=[],w=[],y=[],m=!1,E=!1,b="",S=0;function k(){if(m&&!E)for(;y.length;)delete w[y.pop()];else y=[];m=!1,E=!1}function C(e){if("string"==typeof e&&(e=e.split(u,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),i=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}C(n||v.tags);for(var T,x,U,j,L,D,A=new f(e);!A.eos();){if(T=A.pos,U=A.scanUntil(o))for(var P=0,q=U.length;P<q;++P)s(j=U.charAt(P))?(y.push(w.length),b+=j):(E=!0,c=!0,b+=" "),w.push(["text",j,T,T+1]),T+=1,"\n"===j&&(k(),b="",S=0,c=!1);if(!A.scan(o))break;if(m=!0,x=A.scan(d)||"name",A.scan(l),"="===x?(U=A.scanUntil(h),A.scan(h),A.scanUntil(i)):"{"===x?(U=A.scanUntil(a),A.scan(p),A.scanUntil(i),x="&"):U=A.scanUntil(i),!A.scan(i))throw new Error("Unclosed tag at "+A.pos);if(L=">"==x?[x,U,T,A.pos,b,S,c]:[x,U,T,A.pos],S++,w.push(L),"#"===x||"^"===x)g.push(L);else if("/"===x){if(!(D=g.pop()))throw new Error('Unopened section "'+U+'" at '+T);if(D[1]!==U)throw new Error('Unclosed section "'+D[1]+'" at '+T)}else"name"===x||"{"===x||"&"===x?E=!0:"="===x&&C(U)}if(k(),D=g.pop())throw new Error('Unclosed section "'+D[1]+'" at '+A.pos);return function(e){for(var t,n=[],r=n,o=[],i=0,a=e.length;i<a;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":o.pop()[5]=t[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(w))}(e,n),a&&o.set(i,c)),c},w.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),i=this.parse(e,o),a=t instanceof g?t:new g(t,void 0);return this.renderTokens(i,a,n,e,r)},w.prototype.renderTokens=function(e,t,n,r,o){for(var i,a,s,c="",l=0,u=e.length;l<u;++l)s=void 0,"#"===(a=(i=e[l])[0])?s=this.renderSection(i,t,n,r,o):"^"===a?s=this.renderInverted(i,t,n,r,o):">"===a?s=this.renderPartial(i,t,n,o):"&"===a?s=this.unescapedValue(i,t):"name"===a?s=this.escapedValue(i,t,o):"text"===a&&(s=this.rawValue(i)),void 0!==s&&(c+=s);return c},w.prototype.renderSection=function(e,r,o,i,a){var s=this,c="",l=r.lookup(e[1]);if(l){if(t(l))for(var u=0,h=l.length;u<h;++u)c+=this.renderTokens(e[4],r.push(l[u]),o,i,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],r.push(l),o,i,a);else if(n(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(r.view,i.slice(e[3],e[5]),(function(e){return s.render(e,r,o,a)})))&&(c+=l)}else c+=this.renderTokens(e[4],r,o,i,a);return c}},w.prototype.renderInverted=function(e,n,r,o,i){var a=n.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],n,r,o,i)},w.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},w.prototype.renderPartial=function(e,t,r,o){if(r){var i=this.getConfigTags(o),a=n(r)?r(e[1]):r[e[1]];if(null!=a){var s=e[6],c=e[5],l=e[4],u=a;0==c&&l&&(u=this.indentPartial(a,l,s));var h=this.parse(u,i);return this.renderTokens(h,t,r,u,o)}}},w.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},w.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||v.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&r===v.escape?String(o):r(o)},w.prototype.rawValue=function(e){return e[1]},w.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},w.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){y.templateCache=e},get templateCache(){return y.templateCache}},y=new w;v.clearCache=function(){return y.clearCache()},v.parse=function(e,t){return y.parse(e,t)},v.render=function(e,n,r,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return y.render(e,n,r,o)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},v.Scanner=f,v.Context=g,v.Writer=w;const m=v,E=document.querySelector("#cdt-scheduler"),b=document.querySelector(".js-menu"),S=document.getElementById("cdt-scheduler-scheduler-window");function k(e,t){const[n,r]=e.split("?");if(n&&r){const e=new URLSearchParams(r);return Object.keys(t).filter((e=>t.hasOwnProperty(e))).forEach((n=>e.set(n,t[n]))),"".concat(n,"?").concat(e.toString())}return e}function C(e){const t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(t,"/").concat(n,"/").concat(e.getFullYear())}function T(e){e&&e.classList.contains("window--panel")&&(e.style.left="auto",e.classList.contains("window--panel-left")&&(e.style.left="".concat(b.getBoundingClientRect().right,"px")))}function x(e){e.addEventListener("window:loaded",(()=>{e.addEventListener("responsive:breakpoint-changed",(()=>T(e))),e.addEventListener("window:beforeShow",(()=>T(e))),E.addEventListener("scheduler:details",(()=>T(e))),b.addEventListener("burger-menu:change",(()=>T(e)))}),{once:!0})}E.addEventListener("scheduler:updated",(()=>{const e=function(){const e=E.scheduler,t=C(new Date(e.settings.startDate)),n=C(new Date(e.settings.endDate));return{DATECOURANTE:e.settings.startDate,DATE_DEBUT:t,dateDebut:t,dateFin:n,startsFrom:e.settings.view}}();!function(e){document.querySelectorAll(".js-cdt-view-link[href]").forEach((t=>{t.href=k(t.href,e)}))}(e),function(e){document.querySelectorAll("input[data-bind]").forEach((t=>{const n=t.getAttribute("data-bind");e.hasOwnProperty(n)&&(t.value=e[n])}))}(e),function(e){const t=document.location;window.history.replaceState(null,"",k(t.href,e))}(e),S.window.close()})),b&&S&&x(S);const U=document.querySelector("#cdt-scheduler-workload-window"),j=U.querySelector("#cdt-scheduler-workload-placeholder"),L=document.querySelector("#js-workload-waiter");b&&U&&x(U),U.addEventListener("window:beforeShow",(e=>{var t;S.window.close(),j.classList.add("hide"),L.waiter.show(),t=e.detail.params,KosmosUtils.xhr({url:t.workloadUrl,method:"get",json:!0,withCredentials:!0,success:function(e){if("SUCCESS"===e.status){const n="[data-template=workload-template-".concat(t.workloadType,"]"),r=document.querySelector(n);r&&(j.innerHTML=m.render(r.innerHTML,{data:e.data})),L.waiter.hide(),j.classList.remove("hide")}}})})),E.addEventListener("scheduler:details",(()=>{U.window.close()}))})();